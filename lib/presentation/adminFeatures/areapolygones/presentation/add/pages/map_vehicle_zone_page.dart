import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:google_maps_flutter/google_maps_flutter.dart';import 'package:shiftapp/presentation/shared/components/base_widget_bloc.dart';import '../../../../../presentationUser/common/common_state.dart';import '../../../data/models/add_vehicle_zone_params.dart';import '../bloc/add_vehicles_zone_bloc.dart';import '../bloc/add_vehicles_zone_state.dart';import 'map_vehicle_zone_screen.dart';class MapVehicleZonePage extends BaseBlocWidget<UnInitState,    AddVehiclesZoneCubit> {  final Function()? onPrevious;  final AddVehicleZoneParams? Function()? onParamsCallback;  MapVehicleZonePage({super.key, this.onPrevious, this.onParamsCallback});  // @override  // void loadInitialData(BuildContext context) {  //   int? id = getArguments(context);  //   bloc.fetchInitialData(id);  // }  @override  String? title(BuildContext context) {    return getArguments(context) != null ? strings.edit_vehicle : null;  }  @override  Widget buildWidget(      BuildContext context, UnInitState state) {    return MapVehicleZoneScreen(      onPrevious: () {        onPrevious!();      },      onAddPolygonPoints: (polygonPoints) {        AddVehicleZoneParams? params = onParamsCallback!();        if (params != null) {          params.latlngs = fromLatLngs(polygonPoints);          bloc.addVehiclesZone(params);        }      },    );  }  @override  void onSuccessDismissed() {    Navigator.pop(context, true);  }  List<VehicleZoneLatLng> fromLatLngs(List<LatLng> latLngs) {    final data = VehicleZoneLatLng.fromLatLngList(latLngs);    data.add(data.first);    return data;  }  @override  bool detectRequiredTasks() {    return false;  }}